# 📥 راهنمای دانلود و اجرای پروژه Pistac

## 🎯 معرفی پروژه

Pistac یک پلتفرم آموزشی مدرن برای حوزه کشاورزی است که شامل:

- 🌐 **وب اپلیکیشن**: پلتفرم کامل با React و TypeScript
- 📱 **اپلیکیشن موبایل**: اپ Android و iOS با Capacitor
- 🎛️ **پنل ادمین**: مدیریت کامل محتوا
- 📊 **پایگاه داده**: SQLite برای ذخیره‌سازی
- 🎥 **مدیریت رسانه**: آپلود و مدیریت فایل‌های مختلف

---

## 🔧 پیش‌نیازها

قبل از دانلود و اجرا، مطمئن شوید این موارد روی سیستم شما نصب است:

### ✅ نرم‌افزارهای ضروری:
- **Node.js** (نسخه 18 یا بالاتر) - [دانلود](https://nodejs.org/)
- **npm** (همراه با Node.js نصب می‌شود)
- **Git** (اختیاری) - [دانلود](https://git-scm.com/)

### 📱 برای توسعه موبایل (اختیاری):
- **Android Studio** (برای Android) - [دانلود](https://developer.android.com/studio)
- **Xcode** (برای iOS - فقط macOS) - [دانلود](https://apps.apple.com/app/xcode/id497799835)

---

## 📥 روش‌های دانلود

### 🥇 روش اول: دانلود از Replit (پیشنهادی)

1. در صفحه Replit، روی **Files** در سمت چپ کلیک کنید
2. روی آیکون **"..."** (منوی بیشتر) در بالای لیست فایل‌ها کلیک کنید
3. گزینه **"Download as ZIP"** را انتخاب کنید
4. فایل زیپ روی کامپیوتر شما دانلود می‌شود

### 🥈 روش دوم: استفاده از Git (برای توسعه‌دهندگان)

```bash
# کلون کردن پروژه
git clone [URL-پروژه-شما]
cd [نام-پروژه]
```

---

## ⚙️ راه‌اندازی پروژه

### 1️⃣ استخراج و باز کردن پروژه

```bash
# اگر فایل زیپ دانلود کرده‌اید، آن را استخراج کنید
# سپس وارد پوشه پروژه شوید
cd pistac-project
```

### 2️⃣ نصب وابستگی‌ها

```bash
# نصب همه پکیج‌های مورد نیاز
npm install
```

### 3️⃣ راه‌اندازی پایگاه داده

```bash
# اجرای migration های پایگاه داده
npm run db:push
```

### 4️⃣ اجرای پروژه

```bash
# اجرای پروژه در حالت development
npm run dev
```

پس از اجرا، پروژه روی آدرس **http://localhost:5000** در دسترس خواهد بود.

---

## 🌐 دسترسی به پنل ادمین

- **آدرس پنل ادمین**: `http://localhost:5000/admin-simple`
- **نام کاربری**: `admin`
- **رمز عبور**: `730895015`

---

## 📱 ساخت اپلیکیشن موبایل

### 🤖 برای Android:

```bash
# راه‌اندازی اولیه Capacitor
npm run mobile:init

# ساخت و باز کردن پروژه Android
npm run mobile:android
```

### 🍎 برای iOS:

```bash
# راه‌اندازی اولیه Capacitor
npm run mobile:init

# ساخت و باز کردن پروژه iOS
npm run mobile:ios
```

---

## 🏗️ ساخت نسخه نهایی (Production)

### وب اپلیکیشن:

```bash
# ساخت نسخه بهینه‌شده
npm run build

# اجرای نسخه production
npm run start
```

### فایل‌های ساخته شده در پوشه `dist/` قرار می‌گیرند.

---

## 📁 ساختار پروژه

```
📁 pistac-project/
├── 📁 client/              # فرانت‌اند React
│   ├── 📁 src/
│   │   ├── 📁 components/   # کامپوننت‌های UI
│   │   ├── 📁 pages/        # صفحات اپلیکیشن
│   │   ├── 📁 hooks/        # React Hooks
│   │   └── 📁 lib/          # توابع کمکی
├── 📁 server/              # بک‌اند Express.js
├── 📁 shared/              # اسکیمای پایگاه داده
├── 📁 android/             # پروژه Android
├── 📁 ios/                 # پروژه iOS
├── 📁 public/              # فایل‌های استاتیک
│   └── 📁 uploads/         # فایل‌های آپلود شده
├── 📄 package.json         # تنظیمات پروژه
├── 📄 pistac.db           # فایل پایگاه داده SQLite
└── 📄 README.md           # مستندات پروژه
```

---

## 🛠️ اسکریپت‌های مفید

```bash
# توسعه
npm run dev              # اجرای حالت development

# ساخت
npm run build            # ساخت نسخه production
npm run start            # اجرای نسخه production

# پایگاه داده
npm run db:push          # اعمال تغییرات schema

# بررسی کد
npm run check            # بررسی TypeScript

# موبایل
npm run mobile:init      # راه‌اندازی اولیه Capacitor
npm run mobile:build     # ساخت و همگام‌سازی با موبایل
npm run mobile:android   # باز کردن Android Studio
npm run mobile:ios       # باز کردن Xcode
```

---

## 🔧 تنظیمات مهم

### 📡 تنظیمات سرور

پروژه به صورت پیش‌فرض روی پورت **5000** اجرا می‌شود. برای تغییر پورت:

```bash
# ویرایش فایل server/index.ts
const PORT = process.env.PORT || 5000;
```

### 💾 تنظیمات پایگاه داده

پروژه از SQLite استفاده می‌کند و فایل پایگاه داده در `pistac.db` ذخیره می‌شود.

### 📂 مدیریت فایل‌ها

فایل‌های آپلود شده در پوشه `public/uploads/` ذخیره می‌شوند.

---

## 🚀 استقرار (Deployment)

### 🌐 Vercel:
1. اکانت Vercel ایجاد کنید
2. پروژه را به GitHub آپلود کنید
3. از Vercel به مخزن GitHub متصل شوید

### 🖥️ سرور شخصی:
```bash
# ساخت پروژه
npm run build

# کپی فایل‌ها روی سرور
# اجرای دستور start
npm run start
```

---

## ❓ رفع مشکلات متداول

### 🔴 خطای نصب پکیج‌ها:
```bash
# پاک کردن cache و نصب مجدد
rm -rf node_modules package-lock.json
npm install
```

### 🔴 مشکل پورت اشغال:
```bash
# پیدا کردن و بستن پروسه
npx kill-port 5000
```

### 🔴 مشکل پایگاه داده:
```bash
# ری‌ست کردن پایگاه داده
rm pistac.db
npm run db:push
```

---

## 📞 پشتیبانی

اگر با مشکلی مواجه شدید:

1. ✅ ابتدا مطمئن شوید همه پیش‌نیازها نصب شده‌اند
2. 🔄 دستور `npm install` را مجدداً اجرا کنید
3. 📖 لاگ‌های خطا را بررسی کنید
4. 🔍 در بخش Issues مشکل مشابه جستجو کنید

---

## 🎉 تبریک!

حالا پروژه Pistac روی سیستم شما به درستی نصب و اجرا شده است. می‌توانید شروع به توسعه و سفارشی‌سازی کنید!

**نکات مهم:**
- ✨ برای هر تغییری که در کد ایجاد می‌کنید، سرور به صورت خودکار restart می‌شود
- 💾 تغییرات پایگاه داده با `npm run db:push` اعمال می‌شوند
- 📱 برای تست روی موبایل از دستورات `mobile:android` یا `mobile:ios` استفاده کنید

موفق باشید! 🚀